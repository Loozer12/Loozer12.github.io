<html>
<head>
    <title>
        Калькулятор Инженерный
    </title>
    
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Play&display=swap" rel="stylesheet">
    
    <script type="text/javascript" src="script.js"></script>
    
</head>
<body>
    <p id="header">
        <span>КАЛЬКУЛЯТОР ИНЖЕНЕРНЫЙ</span>
    </p>
    <h1>По клаве тоже можно клацать)</h1>
    <input type="text" id="input">
    <br>
    <button class="btnPressNum" data-num="7" id="btn_7" type="button">7</button>
    <button class="btnPressNum" data-num="8" id="btn_8" type="button">8</button>
    <button class="btnPressNum" data-num="9" id="btn_9" type="button">9</button>
    <br>
    <button class="btnPressNum" data-num="4" id="btn_4" type="button">4</button>
    <button class="btnPressNum" data-num="5" id="btn_5" type="button">5</button>
    <button class="btnPressNum" data-num="6" id="btn_6" type="button">6</button>
    <br>
    <button class="btnPressNum" data-num="1" id="btn_1" type="button">1</button>
    <button class="btnPressNum" data-num="2" id="btn_2" type="button">2</button>
    <button class="btnPressNum" data-num="3" id="btn_3" type="button">3</button>
    <br>
    <button class="btnPressNum" data-num="0" id="btn_0" type="button">0</button>
    <button class="btnPressDot" id="btn_Dot" type="button">,</button>
    <button class="btnPressBackspace" id="btn_Backspace" type="button">Del</button>
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
	class CalcLogic {
		numberNow = 1;
		number1 = "";
		number2 = "";
		
		updateInput()
		{
			$("#input").val(this["number" + this.numberNow]);
		}
		
		_btnAnimation(name)
		{
			$(`#btn_${name}`).fadeOut();
			$(`#btn_${name}`).fadeIn();
		}

		btnPressNum(num) {
			
			if(!isNaN(Number(num)))
			{
				let number = Number(num);
				this._btnAnimation(number);
				
				this["number" + this.numberNow] = this["number" + this.numberNow] + "" + number;
				
				this.updateInput();
			}
			else
			{
				console.error("Func name: btnPressNum\n\nError: var num - is not number");
			}
		}
		
		btnPressBackspace()
		{
			this._btnAnimation("Backspace");
			
			let str = this["number" + this.numberNow] + "";
			
			this["number" + this.numberNow] = str.substr(0, str.length - 1);
			
			this.updateInput();
		}
		
		btnPressDot()
		{
			this._btnAnimation("Dot");
			
			let str = this["number" + this.numberNow] + "";
			
			if(!str.includes("."))
			{
				this["number" + this.numberNow] = this["number" + this.numberNow] + ".";
				
				this.updateInput();
			}
			else
			{
				console.info("Точка уже установлена!");
			}
		}

	}
	
	let Calc = new CalcLogic();

	$( document ).keydown((e)=>{
		
		switch(e.key)
		{
			case "0":
			case "1":
			case "2":
			case "3":
			case "4":
			case "5":
			case "6":
			case "7":
			case "8":
			case "9":
				Calc.btnPressNum(e.key);
			break;
			
			case ".":
			case ",":
				Calc.btnPressDot();
			break;
			
			case "Backspace":
				Calc.btnPressBackspace();
			break;
			
		}
		
	});
	
	$(".btnPressNum").click((e)=>{
		let num = e.currentTarget.dataset.num;
		Calc.btnPressNum(num);
	});
	
	$(".btnPressDot").click((e)=>{
		Calc.btnPressDot();
	});
	
	$(".btnPressBackspace").click((e)=>{
		Calc.btnPressBackspace();
	});

</script>
</body>
</html>
